#!/usr/bin/env bash
# configures Nginx so that its HTTP response contains a custom header on web-01 and web-02

# Update the package list and Install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# sed to add the line inside the server block
nginx_config_line="add_header X-Served-By \$hostname;"
sudo sed -i "/^\s*server\s*{/,/^\s*}\s*$/ s|^\s*|\t$nginx_config_line\n|" /etc/nginx/nginx.conf

# Restart the Nginx service to apply the changes
sudo service nginx restart
